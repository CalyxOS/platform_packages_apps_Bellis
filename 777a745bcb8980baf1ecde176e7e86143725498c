{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b0005414_d0dad757",
        "filename": "app/src/main/java/org/calyxos/bellis/MainActivity.kt",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-06T18:11:42Z",
      "side": 1,
      "message": "This doesn\u0027t seem quite right. Why is onCreate being called twice? I\u0027d rather handle this wherever this is being caused. The 2 calls below shouldn\u0027t be called more than once indeed",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 28,
        "endChar": 9
      },
      "revId": "777a745bcb8980baf1ecde176e7e86143725498c",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9c7ca0e5_7c829719",
        "filename": "app/src/main/java/org/calyxos/bellis/MainActivity.kt",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-06T18:26:41Z",
      "side": 1,
      "message": "Commit message clarifies why it is called again. Would still like to see if it can be handled differently",
      "parentUuid": "b0005414_d0dad757",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 28,
        "endChar": 9
      },
      "revId": "777a745bcb8980baf1ecde176e7e86143725498c",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9b6e8fb_8bbbafdb",
        "filename": "app/src/main/java/org/calyxos/bellis/MainActivity.kt",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-06T18:28:43Z",
      "side": 1,
      "message": "I suppose the question is why is `ACTION_PROVISIONING_SUCCESSFUL` still in the intent on the second call to `onCreate`?",
      "parentUuid": "9c7ca0e5_7c829719",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 28,
        "endChar": 9
      },
      "revId": "777a745bcb8980baf1ecde176e7e86143725498c",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2b8f61c_51251ea0",
        "filename": "app/src/main/java/org/calyxos/bellis/MainActivity.kt",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-06-06T18:58:24Z",
      "side": 1,
      "message": "As far as I can tell, that\u0027s because the Intent that started the Activity originally hasn\u0027t changed (that\u0027s what is returned by `getIntent()` or, in Kotlin, `intent`). Returning to the existing Activity from SUW doesn\u0027t change that fact; we\u0027re just going back to it. (Also, to be clear, when SUW is called twice, the PID/TID of Bellis is the same each time, so it\u0027s the same instance.)\n\nI\u0027m no expert in these kinds of details of Android apps. I came across this when I was trying to look it up / understand it: https://stackoverflow.com/questions/34195828/how-to-come-back-to-first-activity-without-its-oncreate-called\n\n...and I did try some of the suggestions (singleTask launch mode in the manifest; using the particular flags mentioned), but it always ended up calling onCreate again anyway, so this was all I could think of.\n\nI added Aayush because I know he has experience on the app side of things in case we\u0027re missing something obvious.",
      "parentUuid": "a9b6e8fb_8bbbafdb",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 28,
        "endChar": 9
      },
      "revId": "777a745bcb8980baf1ecde176e7e86143725498c",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55c89ee9_2aff4131",
        "filename": "app/src/main/java/org/calyxos/bellis/MainActivity.kt",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-06T19:14:00Z",
      "side": 1,
      "message": "Hmm ok. Thanks for the info and looking into it. My next thought would be does it still recreate if we call `finish()` after completing the calls below (the one and only time they\u0027d be called)?",
      "parentUuid": "c2b8f61c_51251ea0",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 28,
        "endChar": 9
      },
      "revId": "777a745bcb8980baf1ecde176e7e86143725498c",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd00da69_4f1d88e4",
        "filename": "app/src/main/java/org/calyxos/bellis/MainActivity.kt",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-06-06T19:16:50Z",
      "side": 1,
      "message": "If we call `finish()`, there\u0027s only one Setup Wizard, yes, but the user doesn\u0027t land in Bellis with the opportunity to manage apps \u0026 content; they land back at the launcher (or presumably wherever they were when they opened Work Profile to set up a new one). If we\u0027re okay with that, it\u0027s a one-liner change.",
      "parentUuid": "55c89ee9_2aff4131",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 28,
        "endChar": 9
      },
      "revId": "777a745bcb8980baf1ecde176e7e86143725498c",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95fa26ab_e44ae28f",
        "filename": "app/src/main/java/org/calyxos/bellis/MainActivity.kt",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2023-06-06T19:24:39Z",
      "side": 1,
      "message": "Ok, so far there\u0027s 3 options? The current patch, `finish()` (with the limitation described above), and trying to see if the intent can be removed if it\u0027s returning from the setup wizard (aka no longer the initial callback from provisioning). I\u0027d rather 3 -\u003e 2 -\u003e 1 in order of preference. If there are other options that have not been considered yet I\u0027m also curious",
      "parentUuid": "cd00da69_4f1d88e4",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 28,
        "endChar": 9
      },
      "revId": "777a745bcb8980baf1ecde176e7e86143725498c",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}