{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "723a228a_35554b29",
        "filename": "app/src/main/java/org/calyxos/bellis/PostProvisioningHelper.kt",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-07-19T13:41:12Z",
      "side": 1,
      "message": "Discussed off-Gerrit about whether we should call this before setting the preference. setProfileEnabled will typically trigger activity re-creation, which could cause a race between a new call to onCreate calling completeProvisioning again and possibly winning before we set the preference, which is what happens when testing with a delay is artificially added setProfileEnabled and setting the preference (when they are reversed from how they\u0027re shown here).\n\nPatchset 4 used an AtomicBoolean (re-creation happens in the same process, so we can do that) to ensure that completeProvisioning only runs once. If we did that, we could reverse these. But I think that if we can\u0027t even make it all the way to setProfileEnabled without something going wrong, we have bigger problems (like the phone crashed or something), and it\u0027s fair for the profile to be unsalvageable and for the user to need to delete it and try again. So I think it\u0027s fine as-is.",
      "revId": "8a89c6ca7d04135727fe128fd79f0dbdfe052663",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Builds",
        "description": {
          "value": "Make sure it builds. A minimum vote is blocking."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Builds\u003dMAX AND -label:Builds\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Builds\u003d0 AND (label:Works\u003dMAX OR label:Bypass-Verification\u003dMAX)"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Builds=MAX AND -label:Builds=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Builds=MAX"],"failingAtoms":["label:Builds=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Builds=0 AND (label:Works=MAX OR label:Bypass-Verification=MAX)"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":["label:Works=MAX"],"failingAtoms":["label:Bypass-Verification=MAX","label:Builds=0"]}
      },
      "patchSetCommitId": "8a89c6ca7d04135727fe128fd79f0dbdfe052663",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "A maximum vote is required for the \u0027Code-Review\u0027 label. A minimum vote is blocking."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX AND -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "8a89c6ca7d04135727fe128fd79f0dbdfe052663",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Works",
        "description": {
          "value": "Make sure it works. A minimum vote is blocking."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Works\u003dMAX AND -label:Works\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Works\u003d0 AND label:Bypass-Verification\u003dMAX"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Works=MAX AND -label:Works=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Works=MAX"],"failingAtoms":["label:Works=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Works=0 AND label:Bypass-Verification=MAX"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bypass-Verification=MAX","label:Works=0"]}
      },
      "patchSetCommitId": "8a89c6ca7d04135727fe128fd79f0dbdfe052663",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}