{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fb96bc25_5fbee522",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-12-04T17:48:23Z",
      "side": 1,
      "message": "Used root to remove post_provisioning.xml and test that this fixes the infinite \"Please wait\" for existing-install users in similar circumstances.\n\nTested that the \"Please wait\" screen still works when it should, by adding a delay before completeProvisioning (otherwise it\u0027s often not noticeable):\n\n```\n--- a/app/src/main/java/org/calyxos/bellis/MainActivity.kt\n+++ b/app/src/main/java/org/calyxos/bellis/MainActivity.kt\n@@ -8,6 +8,8 @@ package org.calyxos.bellis\n \n import android.app.admin.DevicePolicyManager\n import android.os.Bundle\n+import android.os.Handler\n+import android.os.Looper\n import androidx.appcompat.app.AppCompatActivity\n import androidx.navigation.NavOptions\n import androidx.navigation.fragment.NavHostFragment\n@@ -25,7 +27,9 @@ class MainActivity : AppCompatActivity() {\n \n         when (intent.action) {\n             DevicePolicyManager.ACTION_PROVISIONING_SUCCESSFUL -\u003e {\n-                PostProvisioningHelper.completeProvisioning(this)\n+                Handler(Looper.getMainLooper()).postDelayed({\n+                    PostProvisioningHelper.completeProvisioning(this)\n+                }, 3000)\n             }\n         }\n     }\n```",
      "revId": "c607ebb800595245603ad69ec78dbbc1379beb22",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8088b9e3_40a2ca91",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-12-04T17:50:24Z",
      "side": 1,
      "message": "With garlic-level based on top of this, and no one having a garlic-level work profile in the wild right now, this change shouldn\u0027t even impact garlic-level since it only affects existing installs upgrading to version 7. garlic-level will be new installs.\n\nSo if we were concerned about not wanting to markComplete for garlic-level here, we don\u0027t have to worry. This won\u0027t do that.",
      "revId": "c607ebb800595245603ad69ec78dbbc1379beb22",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1db3fe52_f5ff64e6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000065
      },
      "writtenOn": "2023-12-04T19:00:15Z",
      "side": 1,
      "message": "shouldn\u0027t this be already marked?",
      "revId": "c607ebb800595245603ad69ec78dbbc1379beb22",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "44e90a80_cdeb40be",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-12-04T19:01:53Z",
      "side": 1,
      "message": "Seemingly not, since we haven\u0027t always had the post-provisioning shared preferences, and users who were using Bellis since before we added it, wouldn\u0027t have that.\n\nIt came up in the CalyxOS Testers Matrix channel (somewhere shared a screenshot).",
      "parentUuid": "1db3fe52_f5ff64e6",
      "revId": "c607ebb800595245603ad69ec78dbbc1379beb22",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc3a2c8a_9c636c7d",
        "filename": "app/src/main/java/org/calyxos/bellis/BasicDeviceAdminService.kt",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-12-05T02:56:20Z",
      "side": 1,
      "message": "Why the additional check?\n\nIs it for fresh installs?",
      "revId": "c607ebb800595245603ad69ec78dbbc1379beb22",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49f6ee45_2cefd3c5",
        "filename": "app/src/main/java/org/calyxos/bellis/BasicDeviceAdminService.kt",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-12-05T14:00:29Z",
      "side": 1,
      "message": "Yes, we do not want this to apply to fresh installs, or provisioning will be marked complete immediately and there would be no point in having a check. For existing installs, though, if it\u0027s not already marked complete at this stage, it never will be.",
      "parentUuid": "bc3a2c8a_9c636c7d",
      "revId": "c607ebb800595245603ad69ec78dbbc1379beb22",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76b5721b_cc2f2671",
        "filename": "app/src/main/java/org/calyxos/bellis/BasicDeviceAdminService.kt",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-12-06T09:34:37Z",
      "side": 1,
      "message": "Mind adding a comment summarising that?",
      "parentUuid": "49f6ee45_2cefd3c5",
      "revId": "c607ebb800595245603ad69ec78dbbc1379beb22",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}